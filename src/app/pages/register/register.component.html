<section class="allLogin">
    <section class="allLogin-info">
        <section class="allLogin-info-cont">
            <header class="allLogin-info-cont-titulo">
                <div class="logoContainer">
                    <img src="/assets/logo/geturplan_logo.svg" alt="logo">
                    <h2>geturplan</h2>
                </div>
            </header>
            <div class="allLogin-info-cont-img">
                <img src="/assets/images/snowboarding.jpg" alt="Imagen de inicio">
            </div>
            <div class="allLogin-info-cont-text">
                <div class="allLogin-info-cont-text-titulo">
                    <h3>Únete a geturplan</h3>
                </div>
                <div class="allLogin-info-cont-text-p">
                    <p>Descubre los nuevos planes de esta semana.</p>
                    <p>Conoce a gente nueva disfrutando de los mejores lugares.</p>
                </div>
            </div>
        </section>
    </section>
    
    <section class="allLogin-cont">
        <section class="login">
            <article class="login-titulo">
                <h3>Crea tu cuenta</h3>
                <p>Regístrate gratis y empieza tu aventura.</p>
            </article>
            
            <form [formGroup]="registerForm" (submit)="onSubmit(registerForm.value)" class="login-form">
                <div class="dobleInput">
                    <div class="inputContainer">
                        <label for="nombre">Nombre</label>
                        <div class="input">
                            <div class="input-icon">
                                <i class="fa-solid fa-user"></i>
                            </div>
                            <input 
                                type="text" 
                                id="nombre"
                                placeholder="Juan"
                                formControlName="nombre">
                        </div>
                        @if (submitted() && registerForm.controls['nombre'].invalid) {
                        <div class="errorMessage">
                            <i class="fa-solid fa-circle-exclamation"></i>
                            @if (registerForm.controls['nombre'].errors?.['required']) {
                            <span>El nombre es obligatorio</span>
                            }
                        </div>
                        }
                    </div>
                    
                    <div class="inputContainer">
                        <label for="apellido">Apellido</label>
                        <div class="input">
                            <div class="input-icon">
                                <i class="fa-solid fa-user"></i>
                            </div>
                            <input 
                                type="text" 
                                id="apellido"
                                placeholder="Pérez"
                                formControlName="apellido">
                        </div>
                        @if (submitted() && registerForm.controls['apellido'].invalid) {
                        <div class="errorMessage">
                            <i class="fa-solid fa-circle-exclamation"></i>
                            @if (registerForm.controls['apellido'].errors?.['required']) {
                            <span>El apellido es obligatorio</span>
                            }
                        </div>
                        }
                    </div>
                </div>
                
                <div class="inputContainer">
                    <label for="username">Nombre de usuario</label>
                    <div class="input">
                        <div class="input-icon">
                            <i class="fa-solid fa-at"></i>
                        </div>
                        <input 
                            type="text" 
                            id="username"
                            placeholder="tunombre"
                            formControlName="username">
                    </div>
                    @if (submitted() && registerForm.controls['username'].invalid) {
                    <div class="errorMessage">
                        <i class="fa-solid fa-circle-exclamation"></i>
                        @if (registerForm.controls['username'].errors?.['required']) {
                        <span>El nombre de usuario es obligatorio</span>
                        }
                    </div>
                    }
                    @if (usernameBackend()) {
                    <div class="errorMessage">
                        <i class="fa-solid fa-circle-exclamation"></i>
                        <span>El nombre de usuario ya existe</span>
                    </div>
                    }
                </div>
                
                <div class="inputContainer">
                    <label for="email">Correo electrónico</label>
                    <div class="input">
                        <div class="input-icon">
                            <i class="fa-solid fa-envelope"></i>
                        </div>
                        <input 
                            type="email" 
                            id="email"
                            placeholder="tu@email.com"
                            formControlName="email">
                    </div>
                    @if (submitted() && registerForm.controls['email'].invalid) {
                    <div class="errorMessage">
                        <i class="fa-solid fa-circle-exclamation"></i>
                        @if (registerForm.controls['email'].errors?.['required']) {
                        <span>El email es obligatorio</span>
                        }
                        @if (registerForm.controls['email'].errors?.['email']) {
                        <span>El email no es válido</span>
                        }
                    </div>
                    }
                    @if (emailBackend()) {
                    <div class="errorMessage">
                        <i class="fa-solid fa-circle-exclamation"></i>
                        <span>El email ya existe</span>
                    </div>
                    }
                </div>
                
                <div class="inputContainer">
                    <label for="password">Contraseña</label>
                    <div class="input">
                        <div class="input-icon">
                            <i class="fa-solid fa-lock"></i>
                        </div>
                        <input 
                            [type]="inputtype()" 
                            id="password"
                            placeholder="••••••••"
                            formControlName="password"
                            (focus)="showPasswordFeedback()"
                            (blur)="hidePasswordFeedback()">
                        <button type="button" class="toggle-password" (click)="showpassword()">
                            <i [class]="showPasswordImg() === '/assets/icons/eye.png' ? 'fa-solid fa-eye' : 'fa-solid fa-eye-slash'"></i>
                        </button>
                    </div>
                    
                    <div class="passbar" [ngClass]="getPassbarClass()"></div>
                    
                    @if (show()) {
                    <div class="passFeedback">
                        <i class="fa-solid fa-circle-info"></i>
                        <span>Mínimo 8 caracteres, incluye mayúsculas, minúsculas y números</span>
                    </div>
                    }
                    
                    @if (submitted() && registerForm.controls['password'].invalid) {
                    <div class="errorMessage">
                        <i class="fa-solid fa-circle-exclamation"></i>
                        @if (registerForm.controls['password'].errors?.['required']) {
                        <span>La contraseña es obligatoria</span>
                        }
                        @if (registerForm.controls['password'].errors?.['pattern']) {
                        <span>La contraseña no es segura</span>
                        }
                    </div>
                    }
                </div>
                
                <button type="submit" class="btn-submit">
                    Crear cuenta
                </button>
            </form>
            
            <div class="register-link">
                <span>¿Ya tienes cuenta?</span>
                <a rel="noopener noreferrer" href="/login">Inicia sesión</a>
            </div>
            
            <div class="back-link">
                <a rel="noopener noreferrer" href="/">
                    <i class="fa-solid fa-arrow-left"></i>
                    <span>Volver al inicio</span>
                </a>
            </div>
        </section>
    </section>
</section>